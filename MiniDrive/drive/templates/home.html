{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>MiniDrive Home</title>
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
	<link rel="stylesheet" href="{% static 'drive/home.css' %}">
	
	<!-- Using default image for all files -->
</head>
<body>
	<!-- Header -->
	<header>
		<div class="logo-container">
			<i class="fas fa-cloud-upload-alt logo-icon"></i>
			<h1>MiniDrive</h1>
		</div>
		<form class="search-form" method="get" action="/search/">
			<div class="search-container">
				<i class="fas fa-search search-icon"></i>
				<input type="text" name="q" placeholder="Search files...">
				<button type="submit" class="icon-button"><i class="fas fa-arrow-right"></i></button>
			</div>
		</form>
		<div class="header-buttons">
			<button class="theme-toggle" id="themeToggle" onclick="toggleTheme()">
				<i class="fas fa-moon theme-icon"></i>
			</button>
			<button class="upload-btn" onclick="window.location.href='upload/'"><i class="fas fa-upload"></i> Upload</button>
			<button class="folder-btn" onclick="location.href='/new-folder/'"><i class="fas fa-folder-plus"></i> New Folder</button>
			<div class="user-profile">
				<img src="https://ui-avatars.com/api/?name=User&background=0D8ABC&color=fff" alt="User" class="avatar">
			</div>
		</div>
	</header>
	<div class="main-container">
		<!-- Sidebar -->
		<nav class="sidebar">
			<ul class="nav-links">
				<li class="nav-item active">
					<a href="/"><i class="fas fa-hdd"></i> My Drive</a>
				</li>
				<li class="nav-item">
					<a href="/shared/"><i class="fas fa-users"></i> Shared with me</a>
				</li>
				<li class="nav-item">
					<a href="/recent/"><i class="fas fa-clock"></i> Recent</a>
				</li>
				<li class="nav-item">
					<a href="/starred/"><i class="fas fa-star"></i> Starred</a>
				</li>
				<li class="nav-item">
					<a href="/trash/"><i class="fas fa-trash"></i> Trash</a>
				</li>
			</ul>
			
	
		</nav>
		<!-- Main Content -->
		<main class="content">
			<div class="content-header">
				<h2>My Files</h2>
				{% comment %} <div class="view-options">
					<button class="view-btn active"><i class="fas fa-th"></i></button>
					<button class="view-btn"><i class="fas fa-list"></i></button>
				</div> {% endcomment %}
			</div>
			
			
			<div class="content-section">
				<div class="section-header">
					<h3>	</h3>
					<div class="sort-options">
						<span>Sort by: </span>
						<select>
							<option>Last Modified</option>
							<option>Name</option>
							<option>Size</option>
						</select>
					</div>
				</div>

				<div class="files-table-container">
					<table class="files-table">
						<thead>
							<tr>
								<th class="file-name-header">Name</th>
								<th class="file-owner-header">Owner</th>
								<th class="file-date-header">Last Modified</th>
								<th class="file-size-header">File Size</th>
								<th class="file-actions-header"></th>
							</tr>
						</thead>
						<tbody>
							{% if files %}
								{% for file in files %}
								<tr class="file-row">
									<td class="file-name-cell">
										<a href="{{ file.url }}" target="_blank" class="file-link">
											<div class="file-info">
												<div class="file-icon-container">
													<img src="{% static 'drive/images/file.jpg' %}" alt="File" class="file-icon-img">
													<i class="fas fa-file-alt file-icon-fallback" style="display: none;"></i>
												</div>
												<span class="file-name">{{ file.filename }}</span>
											</div>
										</a>
									</td>
									<td class="file-owner-cell">
										<div class="owner-info">
											<img src="https://ui-avatars.com/api/?name=User&size=24&background=0D8ABC&color=fff" alt="Owner" class="owner-avatar">
											<span>You</span>
										</div>
									</td>
									<td class="file-date-cell">Sep 26, 2025</td>
									<td class="file-size-cell">2.4 MB</td>
									<td class="file-actions-cell">
										<div class="row-actions">
											<button class="row-action-btn" title="Share">
												<i class="fas fa-share-alt"></i>
											</button>
											<button class="row-action-btn" title="Download">
												<i class="fas fa-download"></i>
											</button>
											<button class="row-action-btn" title="More">
												<i class="fas fa-ellipsis-v"></i>
											</button>
										</div>
									</td>
								</tr>
								{% endfor %}
							{% else %}
								<tr>
									<td colspan="5" class="empty-state">
										<div class="no-files">
											<i class="fas fa-folder-open no-files-icon"></i>
											<h3>No files found</h3>
											<p>Upload your first file to get started</p>
										</div>
									</td>
								</tr>
							{% endif %}
						</tbody>
					</table>
				</div>



				</div>

				
			
			
		</main>
	</div>
	
	<!-- Context Menu -->
	<div class="context-menu" style="display: none;">
		<ul class="menu-options">
			<li><i class="fas fa-eye"></i> Preview</li>
			<li><i class="fas fa-share"></i> Share</li>
			<li><i class="fas fa-download"></i> Download</li>
			<li><i class="fas fa-edit"></i> Rename</li>
			<li><i class="fas fa-trash"></i> Delete</li>
		</ul>
	</div>
	
	<!-- Upload Modal (Hidden by default) -->
	<div class="modal" id="uploadModal" style="display: none;">
		<div class="modal-content">
			<div class="modal-header">
				<h3>Upload Files</h3>
				<button class="close-btn">&times;</button>
			</div>
			<div class="modal-body">
				<div class="upload-area">
					<i class="fas fa-cloud-upload-alt"></i>
					<p>Drag & drop files here or</p>
					<label class="file-input-label">
						Browse Files
						<input type="file" multiple style="display: none;">
					</label>
				</div>
				<div class="upload-progress" style="display: none;">
					<div class="file-preview">
						<span>document.pdf</span>
						<div class="progress-bar">
							<div class="progress" style="width: 65%"></div>
						</div>
					</div>
				</div>
			</div>
			<div class="modal-footer">
				<button class="cancel-btn">Cancel</button>
				<button class="upload-btn">Upload</button>
			</div>
		</div>
	</div>
	
	<!-- JavaScript for theme switching and functionality -->
	<script>
		// Theme switching functionality
		function toggleTheme() {
			const body = document.body;
			const themeIcon = document.querySelector('.theme-icon');
			
			body.classList.toggle('dark-theme');
			
			if (body.classList.contains('dark-theme')) {
				themeIcon.classList.remove('fa-moon');
				themeIcon.classList.add('fa-sun');
				localStorage.setItem('theme', 'dark');
			} else {
				themeIcon.classList.remove('fa-sun');
				themeIcon.classList.add('fa-moon');
				localStorage.setItem('theme', 'light');
			}
		}

		// Load saved theme on page load
		document.addEventListener('DOMContentLoaded', function() {
			console.log('MiniDrive interface loaded');
			
			// Load saved theme
			const savedTheme = localStorage.getItem('theme');
			const themeIcon = document.querySelector('.theme-icon');
			
			if (savedTheme === 'dark') {
				document.body.classList.add('dark-theme');
				themeIcon.classList.remove('fa-moon');
				themeIcon.classList.add('fa-sun');
			}
		});
	</script>
</body>
</html>
